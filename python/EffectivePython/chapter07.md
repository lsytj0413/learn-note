# 第七章: 协作开发 #

## 第49条: 为每个函数, 类和模块编写文档字符串 ##

### 介绍 ###

Python对文档提供了内置的支持, 使得开发者可以把文档与代码块关联起来. Python程序在运行的额时候可以通过 \_\_doc\_\_ 这个特殊属性直接访问源代码中的文档信息.

因为Python代码支持文档字符串和 \_\_doc\_\_ 属性, 带来了以下的好处:

1. 交互式开发更方便
2. 开发者可以构建一些工具把纯文本转换为HTML等更友好的方式
3. 开发者可以在程序中访问格式良好的文档信息

我们在编写文档字符串时应该遵循一些规则, 可以参阅 [PEP257](http://www.python.org/dev/peps/pep-0257). 以下是一些应该遵循的规范:

#### 为模块编写文档 ####

每个模块都应该有顶级的docstring, 这个字符串字面量应该作为源文件的第一条语句, 用三重双引号括起来, 介绍当前的模块以及模块之中的内容.

docstring的第一行文字用以描述本模块的用途. 下面的那段话包含一些细节信息, 把与本模块的操作有关的内容告诉模块的使用者, 强调本模块里面比较重要的类和函数.

#### 为类编写文档 ####

每个类都应该有类级别的docstring, 写法与模块的docstring大致相同. 类中比较重要的public属性及方法应该在这个docstring中加以强调, 还应该告诉子类的实现者如何才能正确的与protected属性集超类方法相交互.

#### 为函数编写文档 ####

每个public函数及方法都应该有docstring, 与模块和类的docstring相似. 应该描述具体的行为和函数的参数, 以及函数的返回值与异常.

为函数编写文档时有一些特例:

1. 如果没有参数且仅有一个简单的返回值, 则用一句话描述就可以
2. 如果没有返回值就不要描述到docstring, 不要出现return None这种描述
3. 如果不会抛出异常则不要描述
4. 在文档中用 \*args 和 \*\*kwargs 描述数量可变的位置参数和数量可变的关键字参数
5. 指出函数的默认值
6. 如果函数是一个生成器, 应该描述该生成器在迭代时所产生的内容
7. 如果函数是一个协程, 应该描述协程所产生的值, 以及通过yield表达式来接纳的值, 同时还要说明协程会于何时停止迭代

可以通过内置的doctest模块来运行docstring中的范例代码, 以确保代码和文档不会在开发过程中产生偏差.

### 要点 ###

1. 应该通过docstring为每个模块, 类和函数编写文档, 在修改代码的时候应该更新这些文档
2. 为模块撰写文档时应该介绍本模块的内容, 并且要把用户应该了解的重要类及重要函数列出来
3. 为类撰写文档时, 应该在class语句下面的docstring中介绍类的行为, 重要属性及子类应该实现的行为
4. 为函数及方法撰写文档时, 应该在def语句下面的docstring中介绍函数的每个参数, 函数的返回值, 函数在执行过程中可能抛出的异常以及其他行为

## 第50条: 用包来安排模块, 并提供稳固的API ##

### 介绍 ###

### 要点 ###

## 第51条: 为自编的模块定义根异常, 以便将调用者与API相隔离 ##

### 介绍 ###

### 要点 ###

## 第52条: 用适当的方式打破循环依赖关系 ##

### 介绍 ###

### 要点 ###

## 第53条: 用虚拟环境隔离项目, 并重建其依赖关系 ##

### 介绍 ###

### 要点 ###
