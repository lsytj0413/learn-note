# 第十二章: VI简介 #

## 12.1 为什么要学习vi ##

学习vi的三条理由:

1. vi总是可用的, POSIX要求系统必须配备vi.
2. vi是轻量级的软件, 运行速度快, 而且非常利于打字.
3. 用户不想被Linux和UNIX用户蔑视, 笑~.

## 12.2 VI背景 ##

1976年Bill Joy写出了vi的第一个版本, 而现在大多数Linux发行版上配备的都是vi的加强版-- vim, 然后vim的硬链接指向Linux系统的vi名称.

## 12.3 启动和退出vi ##

输入以下命令启动和退出vi:

```
# 启动
vi
# 退出
:q
:q!
```
如果用户不能确定vi所处的状态, 可以按两次Esc键返回初始状态.

## 12.4 编辑模式 ##

vi是一个模态编辑器, 启动后进入的是命令模式, 在此模式中键盘上的每一个按键都代表一条命令.

### 12.4.1 进入插入模式 ###

可以在命令模式下按下I(或i)键进入插入模式, 现在就可以进行输入操作.

### 12.4.2 保存工作 ###

在命令模式下按下 [:] 键, 然后输入w键则将内容写入硬盘.

## 12.5 移动光标 ##

在命令模式下, vi的光标移动命令如下:

| 快捷键 | 作用 | 常用度 | 附加说明 |
|:---------|:-------|:------:|:--------|
| h或左键头 | 左移一个字符 | 常用 | 可用数字+按钮移动多次 |
| j或下箭头 | 下移一个字符 | 常用 | 同上 |
| k或上箭头 | 上移一个字符 | 常用 | 同上 |
| l或右键头 | 右移一个字符 | 常用 | 同上 |
| [Ctrl] + [f] | 屏幕向下一页 | 常用 | 相当于[PageDown] |
| [Ctrl] + [b] | 屏幕向上一页 | 常用 | 相当于[PageUp] |
| [Ctrl] + [d] | 屏幕向下半页 | 一般 |   |
| [Ctrl] + [u] | 屏幕向上半页 | 一般 |   |
| + | 移动到下一列开始 | 一般 |   |
| - | 移动到上一列开始 | 一般 |   |
| n &lt;space&gt; | 后移n个字符 | 一般 | 相当于[n &lt;j&gt;] |
| 0或[Home] | 移动到这一行的开始 | 常用 |   |
| $或[End] | 移动到这一行的结束 | 常用 |   |
| H | 移动到该屏最上方行的第一个字符 | 一般 |   |
| M | 移动到该屏中间行的第一个字符 | 一般 |   |
| L | 移动到该屏最下方行的第一个字符 | 一般 |   |
| G | 移动到该文件的最后一行的第一个字符 | 常用 |   |
| nG | 移动到该文件的第n行 | 常用 | n为数字 |
| gg | 移动到该文件的第1行 | 常用 | 相当于1G |
| n &lt;Enter&gt; | 向下移动n行 | 常用 | 相当于nj |
| W | 到下一个单词或标点的开始处 | 一般 |  |
| WW | 到下一个单词的开头, 忽略标点 | 一般 |  |
| B | 到上一个单词或标点的开始处 | 一般 |  |
| BB | 到上一个单词的开头, 忽略标点 | 一般 |  |

## 12.6 基本编辑 ##

插入, 删除, 剪切和复制等构成了基本的文本编辑操作, 同时vi以命令模式下的u键支持对最后一步操作的撤销操作.

### 12.6.1 添加文本 ###

进入编辑模式的命令如下:

| 快捷键 | 作用 | 常用度 | 附加说明 |
|:---------|:-------|:------:|:--------|
| i | 从光标所在位置插入 | 常用 |   |
| I | 从光标所在行第一个非空字符处插入 | 常用 |   |
| a | 从光标所在位置下一个字符处插入 | 常用 |   |
| A | 从光标所在行的最后一个字符后插入 | 常用 |   |
| o | 从光标所在行的下一行插入新行 | 常用 | 小写字母o |
| O | 从光标所在行的上一行插入新行 | 常用 | 大写字母O |
| r | 取代光标所在字符一次 | 常用 |   |
| R | 一直进行取代 | 常用 |   |
| [Esc] | 退出编辑模式，回到一般模式 | 常用 | Escape键 |

### 12.6.2 插入一行 ###

可以通过在文本中重开一行的方式来插入文本, 即在两行现存的文字中插入空白行并进入插入模式:

| 命令 | 开行 |
|:--|:--|
| o | 当前行的上方 |
| O | 当前行的下方 |

### 12.6.3 删除文本 ###

| 快捷键 | 作用 | 常用度 | 附加说明 |
|:---------|:-------|:------:|:--------|
| x | 向后删除一个字符 | 常用 | 相当于[del] |
| X | 向前删除一个字符 | 常用 | 相当于[backspace] |
| nx | 向后删除n个字符 | 常用 | n为数字 |
| dd | 删除光标所在行 | 常用 |   |
| ndd | 向下删除n行 | 常用 | n为数字 |
| d1G | 删除光标所在行到第1行的数据 | 一般 |   | 
| dG | 删除光标所在行到最后1行的数据 | 一般 |   |
| dnG | 删除光标所在行到第n行的数据 | 一般 |   |
| d$ | 删除光标所在字符到该行最后一个字符 | 常用 |   |
| d0 | 删除光标所在字符到该行第一个字符 | 常用 |   |
| d^ | 删除光标所在字符到该行第一个非空字符 | 常用 |   |
| c | 重复删除多个数据 | 一般 | 例如向下删除10行, [10cj] |
| . | 重复前一个动作 | 常用 | 即小数点 |

### 12.6.4 剪切, 复制和粘贴文本 ###

| 快捷键 | 作用 | 常用度 | 附加说明 |
|:---------|:-------|:------:|:--------|
| yy | 复制光标所在行 | 常用 |   |
| nyy | 向下复制n行 | 常用 | n为数字 |
| y1G | 复制光标所在行到第一行数据 | 一般 |   |
| ynG | 复制光标所在行到第n行数据 | 一般 |   |
| yG | 复制光标所在行到最后一行数据 | 一般 |   |
| y0 | 复制光标所在字符到该行第一个字符 | 常用 |   |
| y$ | 复制光标所在字符到该行最后一个字符 | 常用 |   |
| yW | 复制光标所在字符到该行下一个单词的开始 | 常用 |   |
| y^ | 复制光标所在字符到该行下一个非空字符 | 常用 |   |
| p | 在光标下一行粘贴 | 常用 |   |
| P | 在光标上一行粘贴 | 常用 |   |
| u | 撤销前一个动作 | 常用 |   |
| [Ctrl] + [r] | 重复前一个动作 | 常用 |   |
| . | 重复前一个动作 | 常用 | 即小数点 |

### 12.6.5 合并行 ###

| 快捷键 | 作用 | 常用度 | 附加说明 |
|:---------|:-------|:------:|:--------|
| J | 将光标所在行与下一行合并 | 常用 |   |

## 12.7 查找和替换 ##

### 12.7.1 行内搜索 ###

### 12.7.2 搜索整个文件 ###

### 12.7.3 全局搜索和替换 ###

## 12.8 编辑多个文件 ##

### 12.8.1 切换文件 ###

### 12.8.2 载入更多的文件 ###

### 12.8.3 文件之间的内容复制 ###

### 12.8.4 插入整个文件 ###

## 12.9 保存工作 ##
