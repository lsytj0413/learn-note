# 第十六章: 网络 #

本章介绍的命令如下:

- ping: 向网络主机发送ICMP ECHO_REQUEST数据包
- traceroute: 显示数据包到网络主机的路由路径
- netstat: 显示网络连接, 路由表, 网络接口数据, 伪连接以及多点传送成员等信息
- ftp: 文件传输命令
- lftp: 改善后的文件传输命令
- wget: 非交互式网络下载器
- ssh: OpenSSH版的SSH客户端(远程系统登录命令)
- scp: secure copy的缩写, 远程复制文件命令
- sftp: secure file transfer program的缩写, 安全文件传输命令

## 16.1 检查, 检测网络 ##

### 16.1.1 ping-向网络主机发送特殊数据包 ###

最基本的网络连接命令就是ping命令, 该命令会向指定的网络主机发送特殊网络数据包ICMP ECHO_REQUEST, 多数网络设备收到该数据包后会做出回应, 通过这种方法即可验证网络连接是否正常.

```
ping linuxcommand.org
```

### 16.1.2 traceroute-跟踪网络数据包的传输路径 ###

traceroute(有些系统使用功能相似的tracepath程序代替)会显示文件通过网络从本地系统传输到指定主机过程中所有的停靠点的列表.

```
traceroute slashdot.org
```

### 16.1.3 netstat-检查网络设置及相关统计数据 ###

netstat命令可以用于查看不同的网络设置及数据, 通过使用其丰富的参数选项, 我们可以查看网络启动过程的许多特性.

```
# 使用 -ie 选项检查系统中的网络接口信息
netstat -ie
```
以上命令会输出网络接口的具体信息, 例如:

```
lo        Link encap:本地环回  
          inet 地址:127.0.0.1  掩码:255.0.0.0
          inet6 地址: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  跃点数:1
          接收数据包:23791 错误:0 丢弃:0 过载:0 帧数:0
          发送数据包:23791 错误:0 丢弃:0 过载:0 载波:0
          碰撞:0 发送队列长度:1 
          接收字节:96862180 (96.8 MB)  发送字节:96862180 (96.8 MB)

wlp2s0    Link encap:以太网  硬件地址 **
          inet 地址:192.168.0.104  广播:192.168.0.255  掩码:255.255.255.0
          inet6 地址: fe80::aa49:33e1:f8fc:5956/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1
          接收数据包:121418 错误:0 丢弃:0 过载:0 帧数:0
          发送数据包:88939 错误:0 丢弃:0 过载:0 载波:0
          碰撞:0 发送队列长度:1000 
          接收字节:165495789 (165.4 MB)  发送字节:11338201 (11.3 MB)
```
该系统有两个网络端口, 第一个称为lo, 是系统用来自己访问自己的回环虚拟接口; 第二个是wlp2s0, 是以太网端口.

对网络进行日常诊断, 是看能否在每个接口信息的第四行开头找到 **UP** 以及能否在第二行的 inet\_addr字段找到有效的IP地址.
第四行的 **UP** 代表着该网络接口已启用, 而对于使用动态主机配置协议的系统(DHCP), inet\_addr 字段里面有效的IP地址则说明了DHCP正在工作.

```
# 使用 -r 选项显示是内核的网络路由表
netstat -r

# 输出如下
内核 IP 路由表
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         sc.10086.com    0.0.0.0         UG        0 0          0 wlp2s0
192.168.0.0     *               255.255.255.0   U         0 0          0 wlp2s0
```
该表的第二行表示接收方的IP地址为192.168.0.0, IP以0结尾表示接收方是网络而非个人主机, Gateway参数字段表示的是建立当前主机与目标网络之间联系的网关的名称或IP地址, 此参数值是星号表示无需网关.

## 16.2 通过网络传输文件 ##

### 16.2.1 ftp-采用FTP传输文件 ###

### 16.2.2 lftp-更好的ftp ###

### 16.2.3 wget-非交互式网络下载工具 ###

## 16.3 与远程主机的安全通信 ##

### 16.3.1 ssh-安全登录远程计算机 ###

### 16.3.2 scp和sftp-安全传输文件 ###
