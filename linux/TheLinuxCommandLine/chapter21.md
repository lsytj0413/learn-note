# 第二十一章: 格式化输出 #

本章介绍的命令如下:

- nl: 对行进行标号
- fold: 设定文本行长度
- fmt: 简单的文本格式化工具
- pr: 格式化打印文本
- printf: 格式化并打印数据
- grof: 文档格式化系统

## 21.1 简单的格式化工具 ##

### 21.1.1 nl-对行进行标号 ###

nl命令用于对行进行编号, 类似于 cat -n.

nl进行编号时支持一个叫做逻辑页的概念, 它可以重置数值序列. 逻辑页可以进一步分解为逻辑页标题, 正文和页脚. 如果nl的输入参数是多个文件, 那么nl会把它们当作一个文本流整体. 文本流中的每一个部分都由一些标记来区别, 如下表:

| 标记 | 含义 |
|:--|:--|
| \:\:\: | 逻辑页页眉开头 |
| \:\: | 逻辑页正文开头 |
| \: | 逻辑页页脚开头 |

每一个标记元素在一行中只允许出现一次, 每次处理完一个标记元素后, nl便将其从文本流中删除.

nl常用的选项如下表:

| 选项 | 含义 |
|:--|:--|
| -b style | 按照style格式对正文进行编号 |
| -f style | 按照style格式对页脚进行编号, 默认是不进行编号 |
| -h style | 按照style格式对标题进行编号, 默认是不进行编号 |
| -i number | 设置页编号的步进值为number, 默认值是1 |
| -n format | 设置编号格式 |
| -p | 在每个逻辑页的开始不再进行页编码重置 |
| -s string | 在每行行号后面增加string作为分隔符, 默认情况为一个tab制表符 |
| -v number | 设置每个逻辑页的第一个行号, 默认值是1 |
| -w width | 设置行号字段的宽度为width, 默认为6 |

编号style可用值如下表:

| style | 含义 |
|:--|:--|
| a | 对每行编号 |
| t | 仅仅对非空白行编号, 对正文是默认选项 |
| n | 不对任何行进行编号 |
| pregexp | 只对与基本正则表达式匹配的行进行编号 |

编号格式可用值如下表:

| 编号格式 | 含义 |
|:--|:--|
| ln | 左对齐, 无缩进 |
| rn | 右对齐, 无缩进, 默认选项 |
| rz | 右对齐, 有缩进 |



### 21.1.2 fold-将文本中的行长度设定为指定长度 ###

### 21.1.3 fmt-简单的文本格式化工具 ###

### 21.1.4 pr-格式化打印文本 ###

### 21.1.5 printf-格式化并打印数据 ###

## 21.2 文档格式化系统 ##

### 21.2.1 roff和TEX家族 ###

### 21.2.2 groff-文档格式化系统 ###

### 21.3 本章结尾语 ###
