# 第十九章: 正则表达式 #

## 19.1 什么是正则表达式 ##

正则表达式是一种符号表示法, 用于识别文本模式. 类似与匹配文件和路径时使用的 shell通配符, 但是用途更为广泛.

## 19.2 grep-文本搜索 ##

我们用来处理正则表达式的主要程序是grep, grep搜索文本文件中与指定正则表达式匹配的行, 并将结果送至标准输出.

```
# 搜索 /usr/bin下名称包含zip字符串的所有文件
ls /usr/bin | grep zip
```

grep命令的格式如下:

```
grep [options] regex [file...]
```

grep常用的选项如下表:

| 选项 | 功能描述 |
| :-- | :-- |
| -i | 忽略大小写, 同 --ignore-case |
| -v | 不匹配, 正常情况下grep会输出匹配行, 该选项可让grep 输出不匹配行, 同 --invert-match |
| -c | 输出匹配项数目而不是匹配行自身, 同 --count |
| -l | 输出匹配项文件名, 同 --files-with-matches |
| -L | 类似 -l 选项, 输出不包含匹配项的文件名, 同 --files-without-match |
| -n | 在每个匹配行前加上行号, 同 --line-number |
| -h | 进行多文件搜索时, 抑制文件名的输出, 同 --no-filename |

## 19.3 元字符和文字 ##

正则表达式 bzip 用于匹配文本中至少包含4个字符, 存在连续的按bzip顺序组成的字符串的行. 字符串bzip中的字符都是文字字符, 即它们只能与自身进行匹配.
除了文字字符, 正则表达式还可以包含用于指定更为复杂的匹配的元字符. 正则表达式的元字符包括以下字符:

```
^ $ . [ ] { } - ? * + ( ) | \
```

其他所有字符都被当作文字字符, 在极少数的情况下反斜杠字符用来创建元序列, 以及用来对元字符进行转义, 使其成为文字字符.

## 19.4 任意字符 ##

元字符中的点字符可以用于匹配任意字符.

```
grep -h '.zip' dirlist*.txt
```

## 19.5 锚 ##

插入符[\^] 和美元符号[$] 在正则表达式中被当作锚, 插入符匹配行的开头, 美元符号匹配行的末尾.

```
grep -h '^zip' dirlist*.txt
grep -h 'zip$' dirlist*.txt
grep -h '^zip$' dirlist*.txt
```

其中 [\^$] 会匹配空行.

## 19.6 中括号表达式和字符类 ##

### 19.6.1 否定 ###

### 19.6.2 传统字符范围 ###

### 19.6.3 POSIX字符类 ###

## 19.7 POSIX基本正则表达式和扩展正则表达式的比较 ##

## 19.8 或选项 ##

## 19.9 限定符 ##

### 19.9.1 ?-匹配某元素0次或1次 ###

### 19.9.2 *-匹配某元素多次或0次 ###

### 19.9.3 +-匹配某元素多次或1次 ###

### 19.9.4 {}-以指定次数匹配某元素 ###

## 19.10 正则表达式的应用 ##

### 19.10.1 用grep命令验证号码簿 ###

### 19.10.2 用find查找奇怪文件名的文件 ###

### 19.10.3 用locate查找文件 ###

### 19.10.4 利用less和vim命令搜索文件 ###

## 19.11 本章结尾语 ##
