# 第20章: 管理事务处理 #

## 20.1 事务处理 ##

使用事务处理可以确保成批的 SQL 操作要么全部执行, 要么全部不执行. 事务处理中包含以下几个术语:

- 事务指一组 SQL 语句
- 回退指撤销指定 SQL 语句的过程
- 提交指将未存储的 SQL 语句结果写入数据库表
- 保留点指事务处理中设置的临时占位符, 可以对它发布回退

事务处理可以管理 INSERT, UPDATE 和 DELETE 语句, 不能回退 SELECT 语句, 也不能回退 CREATE 或 DROP 操作.

## 20.2 控制事务处理 ##

在 MySQL 中使用以下语法开启事务:

```
START TRANSACTION;
```

### 20.2.1 使用 ROLLBACK ###

```
DELETE FROM Orders;
ROLLBACK;
```

### 20.2.2 使用 COMMIT ###

一般的 SQL 语句都是针对数据库表直接执行和编写的, 就是所谓的隐式提交, 即提交操作是自动进行的.

而在事务处理中, 提交不会隐式进行.

### 20.2.3 使用保留点 ###

有些复杂的事务可能需要部分提交或回退. 要支持回退部分事务必须在事务处理中的合适位置放置占位符. 在 MySQL 中可以这样使用:

```
SAVEPOINT delete1;
ROLLBACK TO delete1;
```
